<!DOCTYPE html>
<html>
<head>
    <title>ModelForge - Create Model</title>
</head>
<body>

    <h2>Create 3D Model</h2>

    <!-- ðŸ”¥ AI Prompt Generator Section -->
    <h3>Quick Generate (AI Prompt)</h3>
    <input type="text" id="objectName" placeholder="Enter object (apple, cube)">
    <button type="button" id="generateBtn">Generate</button>

    <br><br>
    <hr>
    <br>

    <!-- ðŸ”¥ Manual Model Creator -->
    <h3>Manual Model Creator</h3>
    <form method="post">
        {% csrf_token %}

        <label>Model Name:</label><br>
        <input type="text" name="name" required><br><br>

        <label>Model Type:</label><br>
        <select name="model_type">
            <option value="cube">Cube</option>
            <option value="sphere">Sphere</option>
            <option value="cylinder">Cylinder</option>
        </select><br><br>

        <label>Width:</label><br>
        <input type="number" step="0.1" name="width" required><br><br>

        <label>Height:</label><br>
        <input type="number" step="0.1" name="height" required><br><br>

        <label>Depth:</label><br>
        <input type="number" step="0.1" name="depth" required><br><br>

        <button type="submit">Generate Model</button>
    </form>


    <!-- Three.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

    <!-- ðŸ”¥ AI Generate Script -->
    <script>
        const input = document.getElementById("objectName");
        const btn = document.getElementById("generateBtn");

        btn.addEventListener("click", async () => {

            const objectName = input.value.trim().toLowerCase();

            if (!objectName) {
                alert("Enter object name");
                return;
            }

            try {
                const response = await fetch(`/api/generate-object/?name=${objectName}`);
                const data = await response.json();

                if (data.success) {
                    // Redirect to 3D viewer
                    window.open(`/viewer/${data.model_id}/`, "_blank");

                } else {
                    alert("Object not supported");
                }

            } catch (error) {
                console.error(error);
                alert("Server error");
            }

        });
    </script>

</body>
</html>
